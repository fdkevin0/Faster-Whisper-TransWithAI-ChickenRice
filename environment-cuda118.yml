# Conda environment for CUDA 11.8 using nvidia channel packages
name: faster-whisper-cu118
channels:
  - conda-forge
  - defaults

dependencies:
  # Python version
  - python=3.10

  # Core dependencies
  - librosa>=0.10.0
  - ffmpeg<6 # av pip installation issue workaround
  - pip

  # CUDA 11.8 toolkit with cuDNN 8
  - cudatoolkit=11.8.*
  - cudnn=8.*

  # Pip dependencies (some packages not available in conda)
  - pip:
      # CTranslate2 for CUDA 11, later forced reinstall to 3.24.0 in CI
      - ctranslate2

      # onnxruntime compatibility workaround
      - numpy==1.26.4

      # faster-whisper and related
      - faster-whisper>=1.0.0

      # Other ML dependencies
      - transformers>=4.30.0

      # Utilities
      - pyjson5>=1.6.0
      - markupsafe==2.1.5

      # Build tools
      - pyinstaller>=6.0.0
      - setuptools>=65.0.0
      - wheel>=0.38.0
      - build>=0.10.0
      - requests>=2.28.0

      # Test dependencies
      - pytest>=7.0.0
      - pytest-cov>=4.0.0
